<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PipeForge.GUI.ViewModels"
        x:Class="PipeForge.GUI.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="PipeForge"
        Width="1200" Height="800"
        MinWidth="800" MinHeight="600">

    <DockPanel>
        <!-- Navigation Sidebar -->
        <Border DockPanel.Dock="Left" Width="200" Background="#1E1E2E" Padding="8">
            <DockPanel>
                <!-- App Title -->
                <TextBlock DockPanel.Dock="Top"
                           Text="PipeForge"
                           FontSize="20" FontWeight="Bold"
                           Foreground="#CDD6F4"
                           Margin="8,12,8,20"
                           HorizontalAlignment="Center" />

                <!-- Nav Buttons -->
                <StackPanel DockPanel.Dock="Top" Spacing="4">
                    <Button Content="Templates"
                            Command="{Binding NavigateToTemplatesCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Padding="12,10" />
                    <Button Content="Editor"
                            Command="{Binding NavigateToEditorCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Padding="12,10" />
                    <Button Content="Run"
                            Command="{Binding NavigateToRunCommand}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Padding="12,10" />
                </StackPanel>

                <!-- Recent Files -->
                <TextBlock DockPanel.Dock="Top"
                           Text="Recent"
                           FontSize="12"
                           FontWeight="SemiBold"
                           Foreground="#585B70"
                           Margin="12,20,8,6"
                           IsVisible="{Binding RecentFiles.Count}" />
                <ListBox DockPanel.Dock="Top"
                         ItemsSource="{Binding RecentFiles}"
                         Background="Transparent"
                         BorderThickness="0"
                         Margin="0,0,0,0"
                         Name="RecentFilesList"
                         DoubleTapped="RecentFilesList_DoubleTapped">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="4,2">
                                <TextBlock Text="{Binding FileName}"
                                           Foreground="#CDD6F4"
                                           FontSize="12" />
                                <TextBlock Text="{Binding FolderName}"
                                           Foreground="#45475A"
                                           FontSize="10" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <!-- Spacer -->
                <Panel />
            </DockPanel>
        </Border>

        <!-- Main Content Area -->
        <ContentControl Content="{Binding CurrentView}" Margin="0" />
    </DockPanel>

</Window>
